module snail_mealy (clk, res_n, D, F);

input logic clk, res_n, D;
output logic 				F;

typedef enum logic [1:0] {OFF = 2'b00, READY, ON} state_t;

state_t state, nextstate;

always_ff @(posedge clk or negedge res_n) begin
	if (!res_n)
		state <= ON;
	else
		state <= nextstate;

end

always_comb begin
	case(state)
		OFF: nextstate = (D) ? READY : OFF;
		READY: nextstate = (D) ? ON : OFF;
		ON: nextstate = (D) ? READY : OFF; 
		default: nextstate = OFF;
	endcase
end

assign F = (state == ON) ? 1 : 0;

endmodule